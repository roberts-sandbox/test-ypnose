<!DOCTYPE html>
<html lang="fr">
<head>
	<!--[if lt IE 9]>
	<script src="//html5shim.googlecode.com/svn/trunk/html5.js"></script>
	<![endif]-->
	<meta charset="utf-8" />
	<meta name="author" content="Ypnose" />
	
	<meta name="description" content="Les péripéties d'un libriste convaincu et passionné de 23 ans." />
	
	<meta name="viewport" content="width=device-width" />
	<link rel="stylesheet" type="text/css" href="/assets/css/style.css" />
	<link rel="alternate" type="application/rss+xml" title="Flux RSS" href="/atom.xml" />
	<link rel="icon" type="image/png" href="/assets/images/favicon.png" />
	
	<title>cpufreq: votre PC va aimer | Dans la Tête du Linuxien</title>
	
	<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-22314110-2']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>

</head>
<body>
	<div class="container">
	<div id="widthmes">
	Vous utilisez un écran ayant une largeur inférieure à 350px.
	Par conséquent, les images ne seront pas affichées et il est possible que la navigation ne soit pas optimale.
</div>

	<div><a href="https://github.com/Ypnose?tab=repositories" class="githubrib">Fork Me</a></div>
	<header>
		<a href="/" title="Dans la Tête du Linuxien"></a>
	</header>

	<nav>
		<ul>
		<li><a href="/">/root</a> &middot;</li>
		<li><a href="/archives/">Archives</a> &middot;</li>
		<li><a href="/hardware/">Hardware</a> &middot;</li>
		<li><a href="/qui-suis-je/">Qui suis-je?</a> &middot;</li>
		<li><a href="/a-savoir/">À savoir</a> &middot;</li>
		<li><a href="/me-contacter/">Me contacter</a> &middot;</li>
		<li><a href="/atom.xml">RSS</a></li>
		</ul>
	</nav>

	<div class="barnav"></div>

	<article>
	<div class="infobox">

		<h1>cpufreq: votre PC va aimer</h1>

		<div>
			Par <a href="/qui-suis-je/">Ypnose</a> - Posté le 28.05.2011
		</div>
		<div>
			<span> &rarr; </span><a href="/categories/Astuce/">Astuce</a>
		</div>

	</div>

	<p>Io les lecteurs,</p>

<p>Voulant faire “joujou” et obtenir le système parfait avec mon nouvel ordinateur, je suis tombé sur la doc Archlinux de cpufreq. Ma carte mère (la M4A89GTD PRO) comporte la fonctionnalité “<a href="http://fr.wikipedia.org/wiki/Cool'n'Quiet">Cool’ n’ Quiet</a>”, qui permet de baisser la fréquence des coeurs du processeurs, lorsque votre système travaille moins. Cpufreq est un outil qui permet de jouer sur les fréquences en fonction d’un profil (performance, conservative, etc). Jusqu’à maintenant, je n’avais pas mis en place cpufreq sur mes installations, mais je me suis laissé tenter.</p>

<p>Depuis que j’ai ce PC, la fréquence des coeurs du Phenom X4 était au maximum, à savoir 3.2 GHz pendant tout l’uptime. Mon système tournait aux alentours de 40°C en idle.</p>

<!-- more -->

<p><img class="imgcenter" alt="Phenom" src="http://linuxien.legtux.org/uploads/images/2011/05/amd-phenom-ii-x4-955.jpg" /></p>

<p>Avant de vous expliquer, je tiens à vous dire que j’ai gagné environ 9°C en idle, ce qui est non négligeable.</p>

<p>La mise en oeuvre est très simple. Il y a plusieurs méthodes possibles. Je vais détailler ce que j’ai fait.</p>

<p>ATTENTION, JE NE SUIS PAS RESPONSABLE DES DÉGRADATIONS DU VOTRE MATÉRIEL, EN CAS DE MAUVAISES MANIPULATIONS.</p>

<p>Pour commencer, il faut installer cpufreq:</p>

<pre><code># pacman -S cpufrequtils
</code></pre>

<p>Avant de faire une config’ en dur, je vous conseille de tester si cpufreq reconnait bien le processeur. Charger donc le module correspondant à votre processeur (renseigner vous pour connaitre ce dernier). Chez moi:</p>

<pre><code># modprobe powernow-k8
</code></pre>

<p>Ensuite lancer:</p>

<pre><code>$ cpufreq-info
</code></pre>

<p>Cette commande devrait vous retourner des infos sur votre modèle, comme les plages de fréquences, le driver utilisé, etc..</p>

<p>J’ai opté pour le daemon, qui permet de définir mes paramètres lors du boot. Modifiez le fichier /etc/conf.d/cpufreq en dé-commentant la ligne “governor” et en indiquant le comportement désiré. Chez moi “ondemand” (fréquence en fonction de la charge). Il faut savoir que quand vous n’installez pas cpufreq, le profil est automatiquement définit sur “Performance”. Vous avez ci-dessus une liste des governors possibles.</p>

<pre><code>#configuration for cpufreq control

# valid governors:
#  ondemand, performance, powersave,
#  conservative, userspace
governor="ondemand"

# limit frequency range (optional)
# valid suffixes: Hz, kHz (default), MHz, GHz, THz
#min_freq="2.25GHz"
#max_freq="3GHz"

# use freq to set up the exact cpu frequency using it with userspace governor
#freq=
</code></pre>

<p>Les lignes min/max_freq permettent de choisir une valeur minimale/maximale de fréquences mais c’est OPTIONNEL. Je n’y ai pas touché. Ma fréquence minimale est définit par cpufreq et est fixée à 800MHz et la maximale à 3.2 GHz (par coeur).</p>

<p>La mise en oeuvre touche à sa fin. Pour finir, modifier votre rc.conf en ajoutant votre driver à charger dans MODULES() et le daemon dans DAEMONS(). L’exemple est bien-sûr pour mon ordi.</p>

<pre><code>MODULES=(powernow-k8)
[...]
DAEMONS=(..., cpufreq)
</code></pre>

<p>Redémarrez la machine et visualisez les températures via sensors (avec lm_sensors installé). Une commande bien pratique:</p>

<pre><code>watch -n 1 sensors
</code></pre>

<p>La commande [watch](http://en.wikipedia.org/wiki/Watch_(Unix) permet de relancer une commande et d’afficher le résultat après une plage de temps. Par défaut, 2 secondes. Incroyablement utile!</p>

<p>Comme toujours, pour plus d’infos, voici la <a href="https://wiki.archlinux.org/index.php/Cpufreq">source</a>.</p>


</article>

<div class="barart"></div>

<div id="lastart">
	<h4>Derniers articles</h4>
	
		<div class="artlink"><span>&rsaquo; </span>21.02.2013<span>&nbsp;&rarr; </span><a href="/2013/02/potato-or-not/">Potato or not potato?</a></div>
	
		<div class="artlink"><span>&rsaquo; </span>11.01.2013<span>&nbsp;&rarr; </span><a href="/2013/01/2013-lannee-du-changement/">2013: l'année du changement</a></div>
	
		<div class="artlink"><span>&rsaquo; </span>05.10.2012<span>&nbsp;&rarr; </span><a href="/2012/10/guide-filesystem-archlinux/">Guide de l'upgrade de filesystem sous Archlinux</a></div>
	
		<div class="artlink"><span>&rsaquo; </span>31.08.2012<span>&nbsp;&rarr; </span><a href="/2012/08/surveillez-hdd-cron/">Surveiller son HDD avec cron</a></div>
	
		<div class="artlink"><span>&rsaquo; </span>03.08.2012<span>&nbsp;&rarr; </span><a href="/2012/08/ete-chaud/">L'été sera chaud!</a></div>
	
</div>


	<div class="barfoot"></div>

	<footer>
		<div>
			<a href="/archives/">Archives</a>  &#124;
			<a href="https://github.com/Ypnose">Github</a>  &#124;
			<a href="https://bitbucket.org/Ypnose">Bitbucket</a>  &#124;
			<a href="https://twitter.com/tetedulinuxien/">Twitter</a>
		</div>
		<div>
			Blog amis:
			<a href="http://lazonelibre.eklablog.com/">Dempiller</a>  &#124;
			<a href="http://schoewilliam.legtux.org/">Schoewilliam</a>  &#124;
			<a href="http://blog.rolinh.ch/">Rolinh</a>  &#124;
			<a href="http://postblue.info/">Postblue</a>
		</div>
		<div>
			Copyright &copy; "Dans la Tête du Linuxien" 2011 / 2013 
			- Design par<a href="/qui-suis-je/">Ypnose</a>
		</div>
		<div>
			<a href="http://validator.w3.org/check?uri=http%3A%2F%2Ftetedulinuxien.fr&amp;charset=%28detect+automatically%29&amp;doctype=Inline&amp;group=0"><img src="/assets/images/html5.png" alt="html5" /></a>
			<a href="http://jigsaw.w3.org/css-validator/validator?uri=http%3A%2F%2Ftetedulinuxien.fr&amp;profile=css3&amp;usermedium=all&amp;warning=1&amp;vextwarning=&amp;lang=en"><img src="/assets/images/css3.png" alt="css3" /></a>
		</div>
	</footer>
	</div>
		<div id="button"><a href="#">&#94;</a></div>
</body>
</html>
